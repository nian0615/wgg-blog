(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{355:function(e,n,t){"use strict";t.r(n);var r=t(43),a=Object(r.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"微信扫码登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#微信扫码登录"}},[e._v("#")]),e._v(" 微信扫码登录")]),e._v(" "),t("p",[e._v("获取access_token的过程")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("点击微信登录链接，会打开一个微信扫码的页面(微信开放平台提供的，地址携带了第三方网站的appID和重定向地址)")])]),e._v(" "),t("li",[t("p",[e._v('用户扫码，微信弹出确认登录按钮，确认以后微信开放平台返回一个临时的code跳转到之前的"重定向地址"，这次跳转会带上临时的code')])]),e._v(" "),t("li",[t("p",[e._v("这个跳转交给了第三方网站处理，相当于一次Get请求。网站会通过code + appid + appsecret(这个放在服务器)，生成了一个access_token")])]),e._v(" "),t("li",[t("p",[e._v("第三方网站返回了access_token，一般也会携带用户信息(通过官方提供的userinfo api实现)，然后就能看过个性化的页面(比如有你的头像)，实现了登录")])])]),e._v(" "),t("p",[e._v("这个过程可以联想一下银行排队叫号，他们给了你临时Code，用了一次后会过期，叫到了你不办理业务也会过期。")]),e._v(" "),t("p",[e._v("access_token相当于给你通过了认证，可以实现免密支付啦。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/sinat_22014829/article/details/73087651",target:"_blank",rel:"noopener noreferrer"}},[e._v("有关Vue使用微信扫码登录的一点小总结"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419316505&token=58cc123fad27e306bfedc323d4cb9c5a32020b77&lang=zh_CN",target:"_blank",rel:"noopener noreferrer"}},[e._v("开放平台-应用开发指南"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419316518&token=58cc123fad27e306bfedc323d4cb9c5a32020b77&lang=zh_CN",target:"_blank",rel:"noopener noreferrer"}},[e._v("开放平台-授权后接口回调"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/lyzg/p/6159617.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("设置多个微信授权回调页面域名"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/lionskys/codetoany",target:"_blank",rel:"noopener noreferrer"}},[e._v("突破微信公众平台一个公众号最多设置2个网页授权回调域名的限制"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"http://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index",target:"_blank",rel:"noopener noreferrer"}},[e._v("公众测试账号获取"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/0201zcr/p/5131602.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("微信公众平台开发————微信授权登录"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" { errcode: 40001,\n\n   errmsg:\n\n   'invalid credential, access_token is invalid or not latest hint: [4IkU_a00893943!]' \n  } \n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("ol",[t("li",[t("p",[e._v("检查是不是重复获取了token")])]),e._v(" "),t("li",[t("p",[e._v("检查接口类型，公众平台和开放平台的用户请求地址是不同的")])])])])}),[],!1,null,null,null);n.default=a.exports}}]);